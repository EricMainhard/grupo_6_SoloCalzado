<%- include('../partials/head') %>
<%- include('../partials/header') %>

<main class="userAccount">

<h2 class="register-bienvenidos"><%=user.first_name%> bienvenido a tu perfil!</h2>
 
<div class="img-container">
  <img src="/images/avatars/<%= user.avatar %>">
</div>   

<div class="register-formulario">
    <form action="/users/update" method="POST"  class="reg-form" enctype="multipart/form-data">      
      <div>
        <label for="firstName">Nombre</label>        
        <input type="text" name="firstName" id="firstName" disabled value="<%=(locals.old && old.firstName)?old.firstName:user.first_name%>" class="editInput"/>    
         <% if (locals.errors && errors.firstName) { %>                  
          <p class="error-msg"><%= errors.firstName.msg %></p> 
        <% } %>  
        <div class="errorMsg"></div>  
      </div>
      <div>
        <label for="lastName">Apellido</label>
        <input type="text" name="lastName" id="lastName" disabled  value="<%=(locals.old && old.lastName)?old.lastName:user.last_name%>" class="editInput"/>       
        <% if (locals.errors && errors.lastName) { %>                  
          <p class="error-msg"><%= errors.lastName.msg %></p> 
        <% } %> 
        <div class="errorMsg"></div>  
      </div>
      <div>
        <label for="email">E-mail</label>
        <input type="email" name="email" id="email" disabled value="<%=(locals.old && old.email)?old.email:user.email%>" class="editInput"/>        
        <% if (locals.errors && errors.email) { %>                  
          <p class="error-msg"><%= errors.email.msg %></p> 
        <% } %> 
        <div class="errorMsg"></div>  
      </div>
      <div>
        <label for="date">Fecha de nacimiento</label>
        <input type="date" name="bornDate" id="date" disabled value="<%=(locals.old && old.bornDate)?old.bornDate:user.born_date%>" class="editInput"/>
      </div>      
      <!-- <div>
        <label for="gender">Género</label>
        <select name="gender" id="gender" disabled>
          <option value="Male" <%= (user.gender == "Male")?"selected":"" %>>Masculino</option>
          <option value="Female" <%= (user.gender == "Female")?"selected":"" %>>Femenino</option>
          <option value="Other" <%= (user.gender == "Other")?"selected":"" %>>Otro</option>
        </select>
      </div> -->

      <div>
        <label for="user">Usuario</label>
        <input type="text" name="user" id="user" disabled value='<%= locals.user.username %>'>        
      </div>
      <div>
        <label for="password">Contraseña</label>
        <input type="password" name="password" id="password" disabled value="Relleno" class="editInput">        
      </div>
      
      <!-- <p> Categoria de Usuario : <%= //locals.user.usercategory.name %> </p>
      <p> Genero de Usuario : <%= //locals.user.usergender.name %> </p> -->
          
      <div><label for="avatar">Selecciona tu avatar</label>
        <input type="file" name="avatar" id="avatar" disabled>
        <% if (locals.errors && errors.avatar) { %>
                  
          <p class="error-msg"><%= errors.avatar.msg %></p>      
          
        <% } %> 
        <div class="errorMsg"></div>
      </div>  
    <div></div>
      <button type="button" id="editBtn">EDITAR</button>
      <button type="submit" id="saveBtn">GUARDAR</button>
    </form>           
  </div> 

  <% if (locals.loggedCategory > 2) { %>
    <p id="listaBtn"> OPCIONES DE ADMINISTRADOR</p>
    <button type="button" id="listaBtn">
      <a href="/users/list">
      LISTA DE USUARIOS
      </a>
   </button>      
  <% } %>

</main>

<script src="/scripts/account.js"></script>
<script src="/scripts/validations.js"></script>

<%- include('../partials/footer') %>